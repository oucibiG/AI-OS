<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
</head>
<!-- 
UNIVERSAL NAVIGATION ENHANCEMENT TEMPLATE
Pridajte tieto funkcie a CSS do v≈°etk√Ωch AI-OS aplik√°ci√≠ pre jednotn√© navigation
-->

<style>
/* Universal Navigation Styles */
.universal-nav {
    position: fixed;
    top: 10px;
    left: 10px;
    right: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 1000;
    pointer-events: none;
}

.nav-button {
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(0, 255, 0, 0.3);
    color: #00ff00;
    padding: 8px 16px;
    border-radius: 20px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 6px;
    pointer-events: auto;
    text-decoration: none;
}

.nav-button:hover {
    background: rgba(0, 255, 0, 0.1);
    border-color: #00ff00;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 255, 0, 0.3);
}

.nav-button.back {
    border-color: rgba(255, 149, 0, 0.5);
    color: #FF9500;
}

.nav-button.back:hover {
    background: rgba(255, 149, 0, 0.1);
    border-color: #FF9500;
    box-shadow: 0 4px 12px rgba(255, 149, 0, 0.3);
}

.nav-button.home {
    border-color: rgba(52, 199, 89, 0.5);
    color: #34C759;
}

.nav-button.home:hover {
    background: rgba(52, 199, 89, 0.1);
    border-color: #34C759;
    box-shadow: 0 4px 12px rgba(52, 199, 89, 0.3);
}

.nav-button.close {
    border-color: rgba(255, 59, 48, 0.5);
    color: #FF3B30;
}

.nav-button.close:hover {
    background: rgba(255, 59, 48, 0.1);
    border-color: #FF3B30;
    box-shadow: 0 4px 12px rgba(255, 59, 48, 0.3);
}

/* Floating Navigation for Mobile */
.floating-nav {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 10px;
    z-index: 1000;
    pointer-events: none;
}

.floating-nav .nav-button {
    pointer-events: auto;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
}

/* iPhone Safe Area Support */
@media (max-width: 390px) {
    .universal-nav {
        top: calc(10px + env(safe-area-inset-top));
        left: calc(10px + env(safe-area-inset-left));
        right: calc(10px + env(safe-area-inset-right));
    }
    
    .floating-nav {
        bottom: calc(20px + env(safe-area-inset-bottom));
    }
}
</style>

<!-- Universal Navigation HTML -->
<div class="universal-nav">
    <button class="nav-button back" onclick="navigateBack()" title="Sp√§≈•">
        ‚¨ÖÔ∏è Sp√§≈•
    </button>
    
    <div style="color: #00ff00; font-weight: 600; font-size: 12px;">
        ü§ñ AI-OS App
    </div>
    
    <button class="nav-button home" onclick="goHome()" title="Domov">
        üè† Domov
    </button>
</div>

<!-- Floating Navigation for Mobile -->
<div class="floating-nav">
    <button class="nav-button back" onclick="navigateBack()" title="Sp√§≈•">
        ‚¨ÖÔ∏è
    </button>
    <button class="nav-button home" onclick="goHome()" title="Domov">
        üè†
    </button>
    <button class="nav-button close" onclick="closeApp()" title="Zatvori≈•">
        ‚ùå
    </button>
</div>

<script>
/* Universal Navigation Functions */
function navigateBack() {
    console.log('‚¨ÖÔ∏è Navigate back called');
    
    // If we came from another page, go back in history
    if (document.referrer && document.referrer !== window.location.href) {
        window.history.back();
    } else {
        // Otherwise go to main AI-OS
        goHome();
    }
}

function goHome() {
    console.log('üè† Go home called');
    
    // Check if this window was opened by another window
    if (window.opener && !window.opener.closed) {
        console.log('Closing window - opened by parent');
        window.close();
    } else {
        console.log('Navigating to main AI-OS');
        // Navigate to main AI-OS
        window.location.href = '../ADVANCED-AI-OS.html';
    }
}

function closeApp() {
    console.log('‚ùå Close app called');
    
    if (window.opener && !window.opener.closed) {
        window.close();
    } else {
        // If can't close, go home
        goHome();
    }
}

// Enhanced navigation with keyboard shortcuts
document.addEventListener('keydown', function(e) {
    // ESC key - go home
    if (e.key === 'Escape') {
        e.preventDefault();
        goHome();
    }
    
    // Backspace key - navigate back (but not in input fields)
    if (e.key === 'Backspace' && !['INPUT', 'TEXTAREA'].includes(e.target.tagName)) {
        e.preventDefault();
        navigateBack();
    }
    
    // Ctrl+H - go home
    if (e.ctrlKey && e.key === 'h') {
        e.preventDefault();
        goHome();
    }
    
    // Ctrl+W - close app
    if (e.ctrlKey && e.key === 'w') {
        e.preventDefault();
        closeApp();
    }
});

// Auto-hide navigation after inactivity on mobile
let navTimeout;
function resetNavTimeout() {
    clearTimeout(navTimeout);
    const navElements = document.querySelectorAll('.universal-nav, .floating-nav');
    
    navElements.forEach(el => {
        el.style.opacity = '0.3';
        el.style.transition = 'opacity 0.3s ease';
    });
    
    navTimeout = setTimeout(() => {
        navElements.forEach(el => {
            el.style.opacity = '1';
        });
    }, 3000);
}

// Show navigation on touch/click
document.addEventListener('touchstart', resetNavTimeout, { passive: true });
document.addEventListener('click', resetNavTimeout);

// Initialize navigation
document.addEventListener('DOMContentLoaded', function() {
    console.log('üîÑ Universal Navigation initialized');
    
    // Show welcome message
    if (window.aiOS && window.aiOS.showNotification) {
        setTimeout(() => {
            window.aiOS.showNotification('Navigation Ready', 'Use ‚¨ÖÔ∏è Back, üè† Home, or ESC key');
        }, 1000);
    }
});
</script>